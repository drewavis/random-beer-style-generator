<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Random Beer Style</title>
		
		<script src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
	</head>
	<body>
		<h1>Random Beer Style Generator</h1>
		<p>Because the internet needs a random beer style generator.</p>
		<div><button onClick=generateStyle()>Generate!</button></div>
		<div id="content"></div>
		<div id="article"></div>
	</body>
	<script>
		function randElement(arr){
			return arr[Math.floor(Math.random() * arr.length)] + " ";
		};
		
		function generateStyle() {
			var structures = ["ncs", // nationality-colour-style
			"cs", // colour-style
			"dns", // direction-nationality-style
			"as", // adjective-style
			"ncfs", // nationality-color-fruit-style
			]
	        var nationalities = ["Afghan", "Albanian", "Algerian", "Andorran", "Angolan", "Argentinian", "Armenian", "Australian", "Austrian", "Azerbaijani", "Bahamian", "Bahraini", "Bangladeshi", "Barbadian", "Belarusan", "Belgian", "Belizean", "Beninese", "Bhutanese", "Bolivian", "Bosnian", "Botswanan", "Brazilian", "British", "Bruneian", "Bulgarian", "Burkinese", "Burmese", "Burundian", "Cambodian", "Cameroonian", "Canadian", "Cape Verdean", "Chadian", "Chilean", "Chinese", "Colombian", "Congolese", "Costa Rican", "Croatian", "Cuban", "Cypriot", "Czech", "Danish", "Djiboutian", "Dominican", "Dominican", "Ecuadorean", "Egyptian", "Salvadorean", "English", "Eritrean", "Estonian", "Ethiopian", "Fijian", "Finnish", "French", "Gabonese", "Gambian", "Georgian", "German", "Ghanaian", "Greek", "Grenadian", "Guatemalan", "Guinean", "Guyanese", "Haitian", "Dutch", "Honduran", "Hungarian", "Icelandic", "Indian", "Indonesian", "Iranian", "Iraqi", "Irish", "Italian", "Jamaican", "Japanese", "Jordanian", "Kazakh", "Kenyan", "Kuwaiti", "Laotian", "Latvian", "Lebanese", "Liberian", "Libyan", "Lithuanian", "Macedonian", "Madagascan", "Malawian", "Malaysian", "Maldivian", "Malian", "Maltese", "Mauritanian", "Mauritian", "Mexican", "Moldovan", "Monacan", "Mongolian", "Montenegrin", "Moroccan", "Mozambican", "Namibian", "Nepalese", "Dutch", "Nicaraguan", "Nigerien", "Nigerian", "North Korean", "Norwegian", "Omani", "Pakistani", "Panamanian", "Papua New Guinean", "Paraguayan", "Peruvian", "Philippine", "Polish", "Portuguese", "Qatari", "Romanian", "Russian", "Rwandan", "Saudi", "Scottish", "Senegalese", "Serbian", "Seychellois", "Sierra Leonian", "Singaporean", "Slovak", "Slovene", "Somali", "South African", "South Korean", "Spanish", "Sri Lankan", "Sudanese", "Surinamese", "Swazi", "Swedish", "Swiss", "Syrian", "Taiwanese", "Tadjik", "Tanzanian", "Thai", "Togolese", "Trinidadian", "Tobagonian", "Tunisian", "Turkish", "Turkmen", "Tuvaluan", "Ugandan", "Ukrainian", "British", "American", "Uruguayan", "Uzbek", "Vanuatuan", "Venezuelan", "Vietnamese", "Welsh", "Western Samoan", "Yemeni", "Yugoslav", "Zaïrean", "Zambian", "Zimbabwean"]
			
			var colours = ["Brown","Black","Yellow","Red","Purple","Greenish","Golden","Platinum","Amber"];
			var directions = ["Southern","Northern","Western","Eastern","Sub-terranian"];
			var adjectives = ["Robust","Hybrid","Common","Light","Quadruple", "Quintupel","Sour","Strong", "Ordinary", "Special", "Extra Special", "Export"];
			var fruits = ["Apple","Orange","Banana","Cherry","Pineapple"];
			var styles = ["Lager","Ale","Weizen","Pilsner","Bock","Porter","Stout","IPA", "Bitter", "Barley-Juice"]
			
			var struct = randElement(structures);
			var style = randElement(styles);
	
			switch (struct){
				case "ncs ":
					style =  randElement(nationalities) +  randElement(colours) + style;
					break;
				case "cs ":
					style = randElement(colours) +  style;
					break;
				case "dns ":
					style = randElement(directions) + randElement(nationalities) + style;
					break;
				case "as ":
					style = randElement(adjectives) + style;
					break;
				case "ncfs ":
					style = randElement(nationalities) + randElement(colours) + randElement(fruits) + style;
					break;
				default: 
					style = "Hairy " + style;
				
					
			};
			
				
			document.getElementById("content").innerHTML="Your style is: <b>" + style + "</b>";
			getRandomDescription();
		};
		
		function getRandomDescription(){
			$.ajax({
        type: "GET",
        // url: "http://en.wikipedia.org/w/api.php?action=parse&format=json&prop=text&section=0&page=Special:Random&callback=?",
        url: "http://en.wikipedia.org/w/api.php?action=query&generator=random&grnnamespace=0&prop=extracts&exchars=500&format=json",
        contentType: "application/json; charset=utf-8",
        async: false,
        dataType: "json",
        success: function (data, textStatus, jqXHR) {
        	alert(data);
 
            var markup = data.parse.text["*"];
            var blurb = $('<div></div>').html(markup);
 
            // remove links as they will not work
            blurb.find('a').each(function() { $(this).replaceWith($(this).html()); });
 
            // remove any references
            blurb.find('sup').remove();
 
            // remove cite error
            blurb.find('.mw-ext-cite-error').remove();
            $('#article').html($(blurb).find('p'));
 
        },
        error: function (errorMessage) {
        }
    });
		}
		
		
		
	</script>
</html>
